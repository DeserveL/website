<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.deservel.website.dao.CommentsMapper">
    <resultMap id="BaseResultMap" type="com.deservel.website.model.po.Comments">
        <!--
          WARNING - @mbg.generated
        -->
        <id column="coid" jdbcType="INTEGER" property="coid"/>
        <result column="cid" jdbcType="INTEGER" property="cid"/>
        <result column="created" jdbcType="INTEGER" property="created"/>
        <result column="author" jdbcType="VARCHAR" property="author"/>
        <result column="author_id" jdbcType="INTEGER" property="authorId"/>
        <result column="owner_id" jdbcType="INTEGER" property="ownerId"/>
        <result column="mail" jdbcType="VARCHAR" property="mail"/>
        <result column="url" jdbcType="VARCHAR" property="url"/>
        <result column="ip" jdbcType="VARCHAR" property="ip"/>
        <result column="agent" jdbcType="VARCHAR" property="agent"/>
        <result column="type" jdbcType="VARCHAR" property="type"/>
        <result column="fmt_type" jdbcType="VARCHAR" property="fmtType"/>
        <result column="thumb_img" jdbcType="VARCHAR" property="thumbImg"/>
        <result column="status" jdbcType="VARCHAR" property="status"/>
        <result column="parent" jdbcType="INTEGER" property="parent"/>
        <result column="content" jdbcType="LONGVARCHAR" property="content"/>
    </resultMap>
    <resultMap id="CommentDto" type="com.deservel.website.model.dto.CommentDto" extends="BaseResultMap">
        <result column="levels" property="levels" jdbcType="INTEGER"/>
    </resultMap>
    <select id="selectArticleCommentsById" resultType="com.deservel.website.model.dto.CommentDto">
         select a.*, 0 as levels from Comments a where a.cid = #{uid} and a.parent=0 and a.status='approved' order by a.coid desc
    </select>
</mapper>